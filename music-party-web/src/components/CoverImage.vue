<template>
  <div class="relative overflow-hidden bg-medical-200 flex items-center justify-center">
    <img
        v-if="!hasError && src"
        :src="src"
        class="w-full h-full object-cover transition-opacity duration-500"
        @error="hasError = true"
    />

    <!-- ðŸŸ¢ ä¿®æ”¹éƒ¨åˆ†å¼€å§‹ï¼šä½¿ç”¨ SVG å›¾æ ‡ä»£æ›¿å›ºå®šåƒç´ çš„ DIV -->
    <div v-else class="flex flex-col items-center justify-center w-full h-full text-medical-400/80 p-1">
      <!--
         1. w-1/2 h-1/2: è®©å›¾æ ‡å¤§å°å§‹ç»ˆå æ®å®¹å™¨çš„ä¸€åŠï¼Œå®Œç¾Žé€‚é… 32px æˆ– 300px
         2. stroke-width: çº¿æ¡ç¨å¾®ç»†ä¸€ç‚¹ï¼Œçœ‹èµ·æ¥æ›´ç²¾è‡´
      -->
      <ImageOff class="w-1/2 h-1/2" :stroke-width="1.5" />

      <!-- åªæœ‰åœ¨å®¹å™¨è¶³å¤Ÿå¤§æ—¶ï¼ˆæ¯”å¦‚ä¸»æ’­æ”¾å™¨ï¼‰ï¼Œæ‰é€šè¿‡ CSS å®¹å™¨æŸ¥è¯¢æˆ–ç®€å•çš„ Hidden é€»è¾‘æ˜¾ç¤ºæ–‡å­—ï¼Ÿ
           ä¸ºäº†ç®€å•ä¸”ä¸ç ´åå¸ƒå±€ï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤æ–‡å­—ï¼Œæˆ–è€…æŠŠæ–‡å­—åšå¾—éžå¸¸å°ä¸”å…è®¸éšè—ã€‚
           é‰´äºŽåˆ—è¡¨å¾ˆå°ï¼Œç›´æŽ¥åªæ˜¾ç¤ºå›¾æ ‡æ˜¯æœ€æ¸…æ™°çš„ã€‚
      -->
    </div>
    <!-- ðŸŸ¢ ä¿®æ”¹éƒ¨åˆ†ç»“æŸ -->

    <!-- æ‰«æçº¿è£…é¥° -->
    <div class="absolute inset-0 bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAADCAYAAABS3WWCAAAAE0lEQVQYV2NkYGD4zwABjFAQAwBATgMJy2B8NAAAAABJRU5ErkJggg==')] opacity-10 pointer-events-none"></div>
  </div>
</template>

<script setup>
import { ref, watch } from 'vue';
// ðŸŸ¢ æ–°å¢žï¼šå¼•å…¥å›¾æ ‡
import { ImageOff } from 'lucide-vue-next';

const props = defineProps(['src']);
const hasError = ref(false);
// å½“ src å˜åŒ–æ—¶é‡ç½®é”™è¯¯çŠ¶æ€
watch(() => props.src, () => hasError.value = false);
</script>