services:
  # 1. 网易云音乐 API 服务
  netease-api:
    image: moefurina/ncm-api:latest
    container_name: music-party-netease
    restart: always
    environment:
      - PORT=3000
      - HTTPS=true
    networks:
      - music-net

  # 2. Music Party 主应用
  music-party:
    build: .
    container_name: music-party-app
    ports:
      - "8848:8080" 
    environment:
      - ADMIN_PASSWORD=admin123
      - NETEASE_API_URL=http://netease-api:3000
      
      # 填入你的 B站 SESSDATA 
      - BILIBILI_SESSDATA=""
      
      # 填入你的网易云 Cookie 
      - NETEASE_COOKIE=""
    depends_on:
      - netease-api
    networks:
      - music-net
    volumes:
      - ./cached_media:/app/cached_media

networks:
  1panel-network:
    external: true
